!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(){throw Error("[BaseClass] Abstract method was called without definition.")}},{}],2:[function(a,b,c){function d(a){return a.extend=function(b){var c,d={base:a.base};b=b||{};for(c in a)"function"==typeof a[c]&&(d[c]=a[c].bind(a));for(c in b)"function"==typeof b[c]?a[c]=e(c,a,d,b):a[c]=b[c];return a.base=d,a},a.implement=function(){var b,c=arguments.length;for(b=0;c>b;b+=1)arguments[b](a);return a},a}var e=a("./rebind.js");d.Abstract=a("./abstract.js"),d.Stub=a("./stub.js"),d.Interface=a("./interface.js"),b.exports=d},{"./abstract.js":1,"./interface.js":3,"./rebind.js":4,"./stub.js":5}],3:[function(a,b,c){b.exports=function(a){return function(b){var c;for(c in a)b[c]=a[c];return b}}},{}],4:[function(a,b,c){b.exports=function(a,b,c,d){return function(){var e,f=b.base;return b.base=c,b.self=d,e=d[a].apply(b,arguments),b.base=f,e}}},{}],5:[function(a,b,c){b.exports=function(){}},{}],6:[function(a,b,c){b.exports=function(){var a,b=arguments[0],c=arguments.length;for(a=1;c>a;a+=1)b=b.replace(/%s/,arguments[a]);return b}},{}],7:[function(a,b,c){(function(a){b.exports=function(b){var c,d={},e={},f=[],g=a.localStorage||{};return c=function(a,c){var h,i,a,j,k="string"==typeof a,l=typeof c,m="undefined"!==l&&"function"!==l;if("on"===g.lumberjack||b){if(!k||!m)throw Error("Lumberjack Error: log(channel, data) requires an channel {String} and a payload {String|Object|Number|Boolean}.");for(j={time:new Date,data:c,channel:a,id:f.length},d[a]=d[a]||[],d[a].push(j),f.push(j),e[a]=e[a]||[],i=e[a].length,h=0;i>h;h+=1)e[a][h](c)}},c.clear=function(a){a?d[a]=[]:(d={},f=[])},c.readback=function(a,b){var c="string"==typeof a;if(c)return b?JSON.stringify(d[a],null,4):d[a]||[];throw Error("log.readback(channel, pretty) requires an channel {String}.")},c.readback.master=function(a){return a?JSON.stringify(f,null,4):f},c.readback.channels=function(a){var b=Object.keys(d);return a?JSON.stringify(b):b},c.flush=function(a){var b;return a?(b=d[a],d[a]=[]):(d={},f=[],b=[]),b},c.on=function(a,b){var c="string"==typeof a,d="function"==typeof b;if(!c||!d)throw Error("log.on(channel, cb) requires an channel {String} and a callback {Function}.");e[a]=e[a]||[],e[a].push(b)},c.off=function(a){var b="string"==typeof a;if(!b)throw Error("log.off(channel) requires an channel {String}.");e[a]=[]},c.enable=function(){b=!0},c.disable=function(){b=!1},c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){var d=a("./geom/dimension.js"),e=a("./geom/point.js");a("./util/log.js");b.exports=function(a){var b,c=0,f=!1,g=a.frames||1,h=a.size||d(),i=a.start||e(),j=e(),k=1;return{size:h,frame:0,speed:a.speed||0,load:function(b){b=b||function(){},a.sheet.load(function(a){h.width=h.width||a.width,h.height=h.height||a.height,j=e(h.width*i.x,h.height*i.y),b(a)})},start:function(){b=Date.now(),f=!0},pause:function(){f=!1},stop:function(){f=!1,c=0,this.frame=0,k=1},update:function(){var a,d,e;f&&this.speed&&(e=1/this.speed*1e3,a=Date.now(),d=a-b,c+=d,c>=e&&(c=0,this.nextFrame()),b=a)},nextFrame:function(){return this.frame+=k,a.sinusoid?this.frame%(g-1)===0&&(k*=-1):this.frame%=g,this.frame},draw:function(b,c,e,f){var g,i=this.frame*h.width;e=e||d(1,1),f=f||0,g=d(h.width*e.width,h.height*e.height),b.save(),b.translate(c.x+g.width/2,c.y+g.height/2),b.rotate(f),b.drawImage(a.sheet,j.x+i,j.y,h.width,h.height,-g.width/2,-g.height/2,g.width,g.height),b.restore()}}}},{"./geom/dimension.js":18,"./geom/point.js":19,"./util/log.js":49}],9:[function(a,b,c){var d=(a("baseclassjs"),a("./collision-item.js")),e=a("./geom/point.js"),f=a("./geom/vector.js"),g=a("./geom/dimension.js"),h=a("./geom/rectangle.js"),i=a("./util/object.js");b.exports=function(a){var b=a.pos||e(),c=a.size||g();return i.mergeDefaults(a,{name:"dragon-sprite",kind:"dragon-sprite",mask:h(),one:{}}),a.one.ready=a.one.ready||function(){this.start()},a.freemask||(a.offset=a.mask.pos(),a.mask.move(b.add(a.offset)),a.mask.width||a.mask.height||a.mask.resize(c)),d(a).extend({updating:a.updating||!1,drawing:a.drawing||!1,pos:b,scale:a.scale||1,size:c,trueSize:function(){return this.size.scale(this.scale)},rotation:a.rotation||0,depth:a.depth||0,speed:a.speed||f(),update:function(){this.updating&&(this.speed.is.zero||this.shift(),this.base.update())},load:function(a){a()},move:function(b){this.pos.move(b,!0),a.freemask||this.base.move(this.pos)},shift:function(a){var b=this.pos.add(a||this.speed);this.move(b)}})}},{"./collision-item.js":12,"./geom/dimension.js":18,"./geom/point.js":19,"./geom/rectangle.js":21,"./geom/vector.js":23,"./util/object.js":50,baseclassjs:2}],10:[function(a,b,c){var d=a("./item.js");b.exports=function(a){var b=!1;return d(a).extend({name:"dragon-collection",kind:"dragon-collection",set:[],map:{},add:function(a){return a.length&&(a.forEach(function(a){this.set.push(a),this.map[a.name]=a,a.trigger("ready")},this),this.set.sort(function(a,b){return a.depth-b.depth})),this},remove:function(a){this.map[a].removed=!0,b=!0},clear:function(){this.set=[],this.map={}},get:function(a){return this.map[a]},update:function(){this.set.forEach(function(a){this.updating&&a.updating&&!a.removed&&a.update()},this)},draw:function(a){this.set.forEach(function(b){this.drawing&&b.drawing&&!b.removed&&b.draw(a)},this)},teardown:function(){this.set.forEach(function(a){this.updating&&a.updating&&!a.removed&&a.teardown()},this),b&&(this.set=this.set.filter(function(a){return!a.removed}),b=!1)}})}},{"./item.js":33}],11:[function(a,b,c){b.exports=function(a){var b=[];return{name:a.name,draw:function(a){b.forEach(function(b){b.mask.draw(a)})},clearCollisions:function(){b=[]},update:function(a){b.push(a)},handleCollisions:function(){b.forEach(function(a){b.forEach(function(b){var c,d,e,f=a.canCollideWith(b.id);f&&(c=a.intersects(b.mask),d=a.isCollidingWith(b.id),e=a.solid&&b.solid,c?(a.addCollision(b.id),d||(a.trigger("collide#"+b.name,b),a.trigger("collide."+b.kind,b)),a.trigger("colliding#"+b.name,b),a.trigger("colliding."+b.kind,b)):(d&&(a.removeCollision(b.id),a.trigger("separate#"+b.name,b),a.trigger("separate."+b.kind,b)),a.trigger("miss#"+b.name,b),a.trigger("miss."+b.kind,b)))})})},teardown:function(){this.clearCollisions()}}}},{}],12:[function(a,b,c){(function(c){var d=a("./util/id-counter.js"),e=a("./geom/rectangle.js"),f=a("./geom/point.js"),g=a("./item.js"),h=a("./io/mouse.js"),i=a("./util/object.js");b.exports=function(a){var b={},j={},k=!1,l=[].concat(a.collisionSets||[]);return i.mergeDefaults(a,{name:"dragon-collidable",kind:"dragon-collidable",on:{}}),a.on["collide#screendrag"]=[].concat(a.on["collide#screendrag"]||[],function(){this.dragging||(this.dragging=!0,h.on.up(function(){this.dragging=!1},this))}),g(a).extend({id:d.nextId,dragging:!1,mask:a.mask||e(),offset:a.offset||f(),move:function(a){this.mask.move(a.add(this.offset))},flushWith:function(a){var b=this.mask.bottom-a.mask.top,d=a.mask.right-this.mask.left,e=a.mask.bottom-this.mask.top,f=this.mask.right-a.mask.left,g=c.Math.min(b,d,e,f),h=this.pos.clone();switch(g){case b:h.y=a.mask.y-this.mask.height;break;case d:h.x=a.mask.right;break;case e:h.y=a.mask.bottom;break;default:h.x=a.mask.x-this.mask.width}this.move(h)},intersects:function(a){return this.mask.intersects(a)},update:function(){k||(k=!0,l.forEach(function(a){a.update(this)},this))},teardown:function(){k=!1,j={}},addCollision:function(a){b[a]=!0,j[a]=!0},removeCollision:function(a){b[a]=!1},clearCollisions:function(){b={}},isCollidingWith:function(a){return b[a]||!1},canCollideWith:function(a){var b=this.id===a,c=j[a];return!b&&!c}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./geom/point.js":19,"./geom/rectangle.js":21,"./io/mouse.js":32,"./item.js":33,"./util/id-counter.js":48,"./util/object.js":50}],13:[function(a,b,c){var d=a("./game.js"),e=a("./util/set.js"),f=a("./util/object.js");b.exports={Shape:a("./geom/shape.js"),Circle:a("./geom/circle.js"),Rectangle:a("./geom/rectangle.js"),Dimension:a("./geom/dimension.js"),Point:a("./geom/point.js"),Vector:a("./geom/vector.js"),Polar:a("./geom/polar.js"),FrameCounter:a("./util/frame-counter.js"),IdCounter:a("./util/id-counter.js"),random:a("./util/random.js"),range:e.range,shuffle:e.shuffle,mergeLeft:f.mergeLeft,mergeDefault:f.mergeDefault,Mouse:a("./io/mouse.js"),Key:a("./io/keyboard.js"),Audio:a("./io/audio.js"),Font:a("./io/font.js"),canvas:a("./io/canvas.js"),SpriteSheet:a("./spritesheet.js"),AnimationStrip:a("./animation-strip.js"),CollisionHandler:a("./collision-handler.js"),collisions:a("./dragon-collisions.js"),screen:d.screen,sprite:d.sprite,addScreens:d.addScreens,removeScreen:d.removeScreen,run:d.run.bind(d),kill:d.kill,Screen:a("./screen.js"),CollisionItem:a("./collision-item.js"),Sprite:a("./sprite.js"),ClearSprite:a("./clear-sprite.js"),ui:{Slider:a("./ui/slider.js"),Button:a("./ui/button.js"),Label:a("./ui/label.js"),Decal:a("./ui/decal.js")},fadeable:a("./interface/fadeable.js"),Eventable:a("./interface/eventable.js")}},{"./animation-strip.js":8,"./clear-sprite.js":9,"./collision-handler.js":11,"./collision-item.js":12,"./dragon-collisions.js":14,"./game.js":16,"./geom/circle.js":17,"./geom/dimension.js":18,"./geom/point.js":19,"./geom/polar.js":20,"./geom/rectangle.js":21,"./geom/shape.js":22,"./geom/vector.js":23,"./interface/eventable.js":25,"./interface/fadeable.js":26,"./io/audio.js":27,"./io/canvas.js":28,"./io/font.js":29,"./io/keyboard.js":31,"./io/mouse.js":32,"./screen.js":37,"./sprite.js":39,"./spritesheet.js":40,"./ui/button.js":41,"./ui/decal.js":42,"./ui/label.js":43,"./ui/slider.js":44,"./util/frame-counter.js":47,"./util/id-counter.js":48,"./util/object.js":50,"./util/random.js":51,"./util/set.js":52}],14:[function(a,b,c){var d=a("./collision-handler.js");b.exports=d({name:"dragon"})},{"./collision-handler.js":11}],15:[function(a,b,c){var d=a("./collection.js"),e=a("./collision-item.js"),f=a("./geom/rectangle.js"),g=a("./geom/point.js"),h=a("./geom/dimension.js"),i=a("./io/canvas.js"),j=a("./dragon-collisions.js");b.exports=d().add([a("./mask/screentap.js"),a("./mask/screendrag.js"),a("./mask/screenhold.js"),e({name:"screenedge/top",mask:f(g(0,-20),h(i.width,20)),collisionSets:j}),e({name:"screenedge/right",mask:f(g(i.width,0),h(20,i.height)),collisionSets:j}),e({name:"screenedge/bottom",mask:f(g(0,i.height),h(i.width,20)),collisionSets:j}),e({name:"screenedge/left",mask:f(g(-20,0),h(20,i.height)),collisionSets:j})])},{"./collection.js":10,"./collision-item.js":12,"./dragon-collisions.js":14,"./geom/dimension.js":18,"./geom/point.js":19,"./geom/rectangle.js":21,"./io/canvas.js":28,"./mask/screendrag.js":34,"./mask/screenhold.js":35,"./mask/screentap.js":36}],16:[function(a,b,c){var d=a("./util/frame-counter.js"),e=a("./io/canvas.js"),f=e.ctx,g=a("./util/id-counter.js"),h=a("./dragon-collisions.js"),i=!1,j=[],k={},l=[],m=!1,n={},o=!1,p=a("./dragon-masks.js");b.exports={debug:a("./util/debug-console.js"),screen:function(a){return k[a]},addScreens:function(a){var b;a&&(a=[].concat(a),b=g.nextId,n[b]=a.length,a.forEach(function(c){c.load(function(){n[b]-=1,0===n[b]&&(l=l.concat(a))})}))},removeScreen:function(a){k[a].removed=!0,m=!0},run:function(a){var b=this,c=function(){b.update(),b.draw(),b.teardown(),d.countFrame(),o&&window.requestAnimationFrame(c)};i=a,a&&(window.Dragon=this),o||(o=!0,window.requestAnimationFrame(c))},kill:function(){o=!1,j.forEach(function(a){a.stop()})},update:function(){var a;p.update(),j.forEach(function(a){a.updating&&a.update()}),h.handleCollisions(),l.length&&(a=l,l=[],a.forEach(function(a){j.push(a),a.name&&(k[a.name]=a),a.trigger("ready")}),j.sort(function(a,b){return a.depth-b.depth}))},draw:function(){j.forEach(function(a){a.drawing&&a.draw(f,i)}),i&&(d.draw(f),h.draw(f))},teardown:function(){h.teardown(),p.teardown(),j.forEach(function(a){a.teardown()}),m&&(j=j.filter(function(a){return!a.removed}),m=!1)}}},{"./dragon-collisions.js":14,"./dragon-masks.js":15,"./io/canvas.js":28,"./util/debug-console.js":45,"./util/frame-counter.js":47,"./util/id-counter.js":48}],17:[function(a,b,c){(function(c){var d=a("./shape.js"),e=a("./vector.js"),f=a("./point.js");a("./dimension.js");b.exports=function(a,b){return a=a||f(),b=b||0,d({pos:a,name:"circle",intersects:{rectangle:function(a){var b,c=f(this.x,this.y);return this.x>=a.right?c.x=a.right:this.x<=a.x&&(c.x=a.x),this.y>=a.bottom?c.y=a.bottom:this.y<=a.y&&(c.y=a.y),b=e(this.x-c.x,this.y-c.y),b.magnitude<this.radius},circle:function(a){var b=e(a.x-this.x,a.y-this.y);return b.magnitude<this.radius+a.radius}}}).extend({radius:b,width:2*b,height:2*b,top:a.y-b,right:a.x+b,bottom:a.y+b,left:a.x-b,center:function(){return f(this.x,this.y)},draw:function(a){a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(250, 50, 50, 0.5)",a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.stroke()},move:function(a){this.x=a.x,this.y=a.y,this.top=a.y-this.radius,this.right=a.x+this.radius,this.bottom=a.y+this.radius,this.left=a.x-this.radius},resize:function(a){var b=c.Math.max(a.width,a.height);this.radius=b,this.width=2*b,this.height=2*b,this.top=this.y-b,this.right=this.x+b,this.bottom=this.y+b,this.left=this.x-b}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./dimension.js":18,"./point.js":19,"./shape.js":22,"./vector.js":23}],18:[function(a,b,c){var d=a("./zero.js");b.exports=function(a,c){var e={width:a||0,height:c||0,clone:function(){return b.exports(this.width,this.height)},equals:function(a){return this.width===a.width&&this.height===a.height},is:{get zero(){return e.equals(d)}},multiply:function(a,b){var c=b?this:this.clone();return c.width*=a.width,c.height*=a.height,c},divide:function(a,b){var c=b?this:this.clone();return c.width/=a.width,c.height/=a.height,c},add:function(a,b){var c=b?this:this.clone();return c.width+=a.width,c.height+=a.height,c},subtract:function(a,b){var c=b?this:this.clone();return c.width-=a.width,c.height-=a.height,c}};return e}},{"./zero.js":24}],19:[function(a,b,c){var d=a("./zero.js");b.exports=function(a,c){var e={x:a||0,y:c||0,clone:function(){return b.exports(this.x,this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},is:{get zero(){return e.equals(d)}},move:function(a,b){var c=b?this:this.clone();return c.x=a.x,c.y=a.y,c},multiply:function(a,b){var c=b?this:this.clone();return c.x*=a.x,c.y*=a.y,c},divide:function(a,b){var c=b?this:this.clone();return c.x/=a.x,c.y/=a.y,c},add:function(a,b){var c=b?this:this.clone();return c.x+=a.x,c.y+=a.y,c},subtract:function(a,b){var c=b?this:this.clone();return c.x-=a.x,c.y-=a.y,c}};return e}},{"./zero.js":24}],20:[function(a,b,c){function d(a,b,c,d){var e=a.magnitude===d*b.magnitude,f=(a.theta%Math.PI).toFixed(5),g=((b.theta+c)%Math.PI).toFixed(5);return e&&f===g}function e(b,c){return{theta:b||0,magnitude:c||0,invert:function(){return e(this.theta+Math.PI,-1*this.magnitude)},clone:function(){return e(this.theta,this.magnitude)},toVector:function(){var b=a("./vector.js");return b(this.magnitude*Math.cos(this.theta),this.magnitude*Math.sin(this.theta))},equals:function(a){return d(this,a,0,1)||d(this,a,Math.PI,-1)}}}b.exports=e},{"./vector.js":23}],21:[function(a,b,c){var d=a("./shape.js"),e=a("./point.js"),f=a("./dimension.js"),g=a("./vector.js");b.exports=function(a,b){return a=a||e(),b=b||f(),d({pos:a,name:"rectangle",intersects:{rectangle:function(a){return this.x<a.right&&this.right>a.x&&this.y<a.bottom&&this.bottom>a.y},circle:function(a){var b,c=e(a.x,a.y);return a.x>this.right?c.x=this.right:a.x<this.x&&(c.x=this.x),a.y>this.bottom?c.y=this.bottom:a.y<this.y&&(c.y=this.y),b=g(a.x-c.x,a.y-c.y),b.magnitude<a.radius}}}).extend({width:b.width||0,height:b.height||0,top:a.y||0,right:a.x+b.width||0,bottom:a.y+b.height||0,left:a.x||0,center:function(){return e(this.x+this.width/2,this.y+this.height/2)},move:function(a){this.x=a.x,this.y=a.y,this.top=a.y,this.right=a.x+this.width,this.bottom=a.y+this.height,this.left=a.x},shift:function(a){this.move(this.pos().add(a))},resize:function(a){this.width=a.width,this.height=a.height,this.right=this.x+a.width,this.bottom=this.y+a.height},draw:function(a){a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(250, 50, 50, 0.5)",a.rect(this.x,this.y,this.width,this.height),a.stroke()}})}},{"./dimension.js":18,"./point.js":19,"./shape.js":22,"./vector.js":23}],22:[function(a,b,c){var d=a("baseclassjs"),e=a("./point.js");b.exports=function(a){var b,c;return a=a||{},c=a.intersects||{},b=a.pos||e(),d({x:b.x,y:b.y,width:0,height:0,top:0,right:0,bottom:0,left:0,pos:function(){return e(this.x,this.y)},name:a.name,move:d.Abstract,resize:d.Abstract,intersects:function(a){return c[a.name].call(this,a)},draw:d.Stub})}},{"./point.js":19,baseclassjs:2}],23:[function(a,b,c){var d=a("./zero.js");b.exports=function(c,e){var f={x:c||0,y:e||0,get magnitude(){return Math.abs(Math.sqrt(this.y*this.y+this.x*this.x))},clone:function(){return b.exports(this.x,this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},is:{get zero(){return f.equals(d)}},toPolar:function(){var b=a("./polar.js");return b(Math.atan(this.y/this.x),this.magnitude)},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this}};return f}},{"./polar.js":20,"./zero.js":24}],24:[function(a,b,c){b.exports={x:0,y:0,right:0,left:0,top:0,bottom:0,width:0,height:0}},{}],25:[function(a,b,c){var d=a("baseclassjs");b.exports=function(a){var b,c={},e={};a=a||{};for(b in a.events)c[b]=[].concat(a.events[b]);for(b in a.singles)e[b]=[].concat(a.singles[b]);return d.Interface({on:function(a,b){c[a]=c[a]||[],c[a].push(b)},one:function(a,b){e[a]=e[a]||[],e[a].push(b)},off:function(a){c[a]=[],e[a]=[]},trigger:function(a,b){a in c&&c[a].forEach(function(a){a.call(this,b)},this),a in e&&(e[a].forEach(function(a){a.call(this,b)},this),e[a]=[])}})}},{baseclassjs:2}],26:[function(a,b,c){var d=a("baseclassjs");b.exports=d.Interface({fadeIn:function(){},fadeOut:function(){}})},{baseclassjs:2}],27:[function(a,b,c){b.exports=function(a){var b=document.createElement("audio"),c=b.play;return b.loop=a.loop||!1,b.volume=a.volume||1,b.play=function(a){a&&(this.currentTime=0),c.call(this)},b.stop=function(){this.pause(),this.currentTime=0},a.on=a.on||{},b.onloadeddata=a.on.load,b.onplay=a.on.play,b.onplaying=a.on.playing,b.onended=a.on.ended,b.src="assets/sound/"+a.src,b}},{}],28:[function(a,b,c){var d=a("../util/detect-mobile.js"),e=document.createElement("canvas");d?(e.width=window.innerWidth,e.height=window.innerHeight):("landscape"===localStorage.drago?(e.width=480,e.height=320):(e.width=320,e.height=480),e.style.border="1px solid #000"),document.body.appendChild(e),e.mobile=d,e.ctx=e.getContext("2d"),b.exports=e},{"../util/detect-mobile.js":46}],29:[function(a,b,c){var d=a("curb"),e="@font-face{font-family:'%s';font-style:%s;font-weight:%s;src:url(assets/fonts/%s);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215,U+E0FF,U+EFFD,U+F000}",f={};b.exports={load:function(a){var b;f[a.name]||(b=document.createElement("style"),b.innerHTML=d(e,a.name,a.style||"normal",a.weight||"400",a.src),document.body.appendChild(b),f[a.name]=!0)}}},{curb:6}],30:[function(a,b,c){b.exports=function(a){var b=new Image;return b.ready=!1,b.cmd=[],b.processLoadEvents=function(){this.cmd.forEach(function(a){a(b)}),this.cmd=[]},b.onload=function(){this.ready=!0,this.processLoadEvents()},b.load=function(c){c=c||function(){},this.ready?c(b):(this.cmd.push(c),this.src="assets/img/"+a)},b}},{}],31:[function(a,b,c){function d(a){return a.charCode||a.keyCode||a.which}var e={alt:!1,ctrl:!1,shift:!1},f={};document.onkeydown=function(a){var b=d(a),c=String.fromCharCode(b);f[b]=!0,e[c]=!0,e.alt=a.altKey,e.ctrl=a.ctrlKey,e.shift=a.shiftKey},document.onkeyup=function(a){var b=d(a),c=String.fromCharCode(b);f[b]=!1,e[c]=!1,e.alt=a.altKey,e.ctrl=a.ctrlKey,e.shift=a.shiftKey},b.exports={get alt(){return e.alt},get ctrl(){return e.ctrl},get shift(){return e.shift},arrow:{get left(){return f[37]||!1},get up(){return f[38]||!1},get right(){return f[39]||!1},get down(){return f[40]||!1}},name:function(a){return e[a]||!1},code:function(a){return f[a]||!1}}},{}],32:[function(a,b,c){(function(c){function d(a){return j.mobile?h(a.touches[0].clientX,a.touches[0].clientY):h(a.offsetX,a.offsetY)}var e,f,g,h=a("../geom/point.js"),i=a("../geom/vector.js"),j=a("./canvas.js"),k=null,l=!1,m=!1,n=!1,o=h(),p=h(),q=i();j.mobile?(e="touchstart",f="touchmove",g="touchend"):(e="mousedown",f="mousemove",g="mouseup"),j.addEventListener(e,function(a){l=!0,o=d(a),c.setTimeout(function(){l&&(n=!0)},200)}),document.addEventListener(g,function(a){l=m=n=!1,k=null}),j.addEventListener(f,function(a){p=o,o=d(a),l&&!m&&(q.x=o.x-p.x,q.y=o.y-p.y,q.magnitude>1&&(m=!0,k=o))}),b.exports={is:{get down(){return l},get dragging(){return m},get holding(){return n}},get offset(){return o},get dragStart(){return k},on:{down:function(a,b){j.addEventListener(e,a.bind(b))},click:function(a,b){},dclick:function(a,b){},up:function(a,b){document.addEventListener(g,a.bind(b))},move:function(a,b){j.addEventListener(f,a.bind(b))},drag:function(a,b){j.addEventListener(f,function(){m&&a.call(b)})},swipe:function(a,b,c){}},eventName:{start:e,move:f,end:g}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../geom/point.js":19,"../geom/vector.js":23,"./canvas.js":28}],33:[function(a,b,c){var d=a("baseclassjs"),e=a("./interface/eventable.js");b.exports=function(a){return a=a||{},d({name:a.name||"dragon-item",kind:a.kind||"dragon-item",depth:0,updating:"boolean"==typeof a.updating?a.updating:!0,drawing:"boolean"==typeof a.drawing?a.drawing:!0,update:d.Stub,draw:d.Stub,teardown:d.Stub,start:function(){this.updating=!0,this.drawing=!0,this.trigger("start")},pause:function(){this.updating=!1,this.drawing=!0,this.trigger("pause")},stop:function(){this.updating=!1,this.drawing=!1,this.trigger("stop")}}).implement(e({events:a.on,singles:a.one}))}},{"./interface/eventable.js":25,baseclassjs:2}],34:[function(a,b,c){var d=a("../collision-item.js"),e=a("../geom/circle.js"),f=a("../geom/point.js"),g=a("../io/mouse.js"),h=a("../dragon-collisions.js");b.exports=d({name:"screendrag",mask:e(f(),8),collisionSets:h,updating:!1,drawing:!1}).extend({update:function(){this.move(g.offset),this.base.update()}}),g.on.drag(function(){this.start()},b.exports),g.on.up(function(){this.stop()},b.exports)},{"../collision-item.js":12,"../dragon-collisions.js":14,"../geom/circle.js":17,"../geom/point.js":19,"../io/mouse.js":32}],35:[function(a,b,c){var d=a("../collision-item.js"),e=a("../geom/circle.js"),f=a("../geom/point.js"),g=a("../io/mouse.js"),h=a("../dragon-collisions.js");b.exports=d({name:"screenhold",mask:e(f(),8),collisionSets:h,updating:!1,drawing:!1}).extend({update:function(){this.move(g.offset),this.base.update()}}),g.on.down(function(){this.start()},b.exports),g.on.drag(function(){this.stop()},b.exports),g.on.up(function(){this.stop()},b.exports)},{"../collision-item.js":12,"../dragon-collisions.js":14,"../geom/circle.js":17,"../geom/point.js":19,"../io/mouse.js":32}],36:[function(a,b,c){var d=a("../collision-item.js"),e=a("../geom/circle.js"),f=a("../geom/point.js"),g=a("../io/mouse.js"),h=a("../dragon-collisions.js");b.exports=d({name:"screentap",mask:e(f(),8),collisionSets:h}).extend({update:function(){this.move(g.offset),this.base.update(),this.stop()}}),g.on.down(function(){this.start()},b.exports)},{"../collision-item.js":12,"../dragon-collisions.js":14,"../geom/circle.js":17,"../geom/point.js":19,"../io/mouse.js":32}],37:[function(a,b,c){var d=a("./sprite-set.js"),e=a("./util/object.js");b.exports=function(a){var b=!1,c={};return e.mergeDefaults(a,{name:"dragon-screen",kind:"dragon-screen",updating:!1,drawing:!1}),d(a).extend({load:function(c){b||(this.addCollisionSets(a.collisionSets),this.base.add({set:a.spriteSet,onload:c,force:!0}),b=!0)},start:function(){this.updating=!0,this.drawing=!0,this.trigger("start")},pause:function(){this.updating=!1,this.drawing=!0,this.trigger("pause")},stop:function(){this.updating=!1,this.drawing=!1,this.trigger("stop")},depth:a.depth||0,collision:function(a){return c[a]},addCollisionSets:function(a){a&&(a=[].concat(a),a.forEach(function(a){c[a.name]=a}))},sprite:function(a){return this.base.get(a)},addSprites:function(a){this.base.add(a)},removeSprite:function(a){this.base.remove(a)},clearSprites:function(){this.base.clear()},update:function(){var a;if(this.updating){this.base.update();for(a in c)c[a].handleCollisions()}},draw:function(a,b){var d;if(this.drawing&&(this.base.draw(a),b))for(d in c)c[d].draw(a)},teardown:function(){var a;this.base.teardown();for(a in c)c[a].teardown()}})}},{"./sprite-set.js":38,"./util/object.js":50}],38:[function(a,b,c){var d=a("./util/id-counter.js"),e=a("./collection.js");b.exports=function(a){var b=[],c={};return e(a).extend({add:function(a){var e,f,g,h,i=this.base;a=a||{},f=a.onload||function(){},g=[].concat(a.set),g.length?(e=d.nextId,c[e]=g.length,g.forEach(function(d){d.removed=!1,d.load(function(){c[e]-=1,0===c[e]&&(b=b.concat(g),a.force&&(h=b,b=[],i.add(h)),f())})})):f()},update:function(){var a;this.base.update(),a=b,b=[],this.base.add(a)}})}},{"./collection.js":10,"./util/id-counter.js":48}],39:[function(a,b,c){(function(c){var d=a("./clear-sprite.js"),e=(a("./geom/point.js"),a("./geom/dimension.js")),f=(a("./geom/rectangle.js"),a("./util/object.js"));b.exports=function(a){var b=!1,g=a.strips||{};return f.mergeDefaults(a,{name:"dragon-texture-sprite",kind:"dragon-texture-sprite",startingStrip:a.startingStrip||c.Object.keys(g)[0]}),a.size=a.size||(g[a.startingStrip]||{}).size,d(a).extend({strip:g[a.startingStrip],useStrip:function(a){this.strip!==g[a]&&(this.strip.stop(),this.strip=g[a],this.strip.start())},getStrip:function(a){return g[a]},start:function(){this.base.start(),this.strip.start()},pause:function(){this.base.pause(),this.strip.pause()},stop:function(){this.base.stop(),this.strip.stop()},update:function(){this.updating&&this.strip.update(),this.base.update()},draw:function(a){this.drawing&&this.strip.draw(a,this.pos,e(this.scale*this.size.width/this.strip.size.width,this.scale*this.size.height/this.strip.size.height),this.rotation),this.base.draw(a)},load:function(a){var d,e;if(a=a||function(){},b)a();else{e=c.Object.keys(g).length;for(d in g)g[d].load(function(){e-=1,0===e&&(a(),b=!0)})}}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./clear-sprite.js":9,"./geom/dimension.js":18,"./geom/point.js":19,"./geom/rectangle.js":21,"./util/object.js":50}],40:[function(a,b,c){var d=a("./io/image.js"),e={};b.exports=function(a){var b,c=a.src;return c in e?b=e[c]:(b=d(c),e[c]=b),b}},{"./io/image.js":30}],41:[function(a,b,c){var d=a("../sprite.js"),e=a("../geom/rectangle.js"),f=a("../geom/point.js"),g=a("../animation-strip.js"),h=a("../spritesheet.js"),i=a("../dragon-collisions.js");b.exports=function(a){return a.down=a.down||{},d({name:a.name||"dragon-ui-button",collisionSets:[i],mask:e(f(),a.size),strips:{up:g({sheet:h({src:a.up.src}),size:a.up.size}),down:g({sheet:h({src:a.down.src||a.up.src}),size:a.down.size||a.up.size})},startingStrip:"up",pos:a.pos,size:a.size,on:{"colliding/screentap":function(){this.useStrip("down"),a.onpress.call(this)},"colliding/screenhold":function(){this.useStrip("down")}}}).extend({update:function(){this.useStrip("up"),this.base.update()}})}},{"../animation-strip.js":8,"../dragon-collisions.js":14,"../geom/point.js":19,"../geom/rectangle.js":21,"../sprite.js":39,"../spritesheet.js":40}],42:[function(a,b,c){var d=a("../sprite.js"),e=a("../animation-strip.js"),f=a("../spritesheet.js");b.exports=function(a){return a.name=a.name||"dragon-ui-decal",a.strips={decal:e({sheet:f({src:a.strip.src}),size:a.strip.size})},d(a)}},{"../animation-strip.js":8,"../sprite.js":39,"../spritesheet.js":40}],43:[function(a,b,c){var d=a("../clear-sprite.js");b.exports=function(a){return a.style=a.style||function(){},a.name=a.name||"dragon-ui-label",d(a).extend({text:a.text,draw:function(b){a.style(b),b.fillText(this.text,this.pos.x,this.pos.y)}})}},{"../clear-sprite.js":9}],44:[function(a,b,c){var d=a("../sprite.js"),e=a("../geom/dimension.js"),f=a("../geom/rectangle.js"),g=a("../geom/point.js"),h=a("../animation-strip.js"),i=a("../spritesheet.js"),j=a("../clear-sprite.js"),k=a("../dragon-collisions.js");b.exports=function(a){var b=a.pos,c=a.size,l=5,m=e(16,32),n=d({name:"slider-lane",collisionSets:[k],mask:f(g(),e(c.width,c.height-2*l)),strips:{slider:h({sheet:i({src:a.src.lane}),size:e(32,8)})},startingStrip:"slider",pos:g(b.x-c.width/2,b.y-c.height/2+l),size:e(c.width,c.height-2*l),on:{"colliding/screentap":function(b){var c,d;c=Math.max(b.mask.x,this.mask.left),c=Math.min(c,this.mask.right),o.pos.x=c-m.width/2,d=c-this.mask.left,d=(d/this.mask.width).toFixed(3),a.onslide(d)}}}),o=d({name:"slider-knob",collisionSets:[k],mask:f(g(),m),strips:{slider:h({sheet:i({src:a.src.knob}),size:e(8,16)})},startingStrip:"slider",pos:g(b.x-m.width/2,b.y-m.height/2),size:m,on:{"colliding/screendrag":function(b){var c,d;c=Math.max(b.mask.x,n.mask.left),c=Math.min(c,n.mask.right),this.pos.x=c-m.width/2,d=c-n.mask.left,d=(d/n.mask.width).toFixed(3),a.onslide(d)}}});return a.onslide=a.onslide||function(){},j().extend({load:function(a){var b=2,c=function(){b-=1,b||a()};n.load(c),o.load(c)},start:function(){n.start(),o.start()},pause:function(){n.pause(),o.start()},stop:function(){n.stop(),o.stop()},update:function(){n.update(),o.update()},draw:function(a){n.draw(a),o.draw(a)},teardown:function(){n.teardown(),o.teardown()}})}},{"../animation-strip.js":8,"../clear-sprite.js":9,"../dragon-collisions.js":14,"../geom/dimension.js":18,"../geom/point.js":19,"../geom/rectangle.js":21,"../sprite.js":39,"../spritesheet.js":40}],45:[function(a,b,c){b.exports={show:{fps:function(){}}}},{}],46:[function(a,b,c){b.exports="ontouchstart"in window},{}],47:[function(a,b,c){var d=frameCountThisSecond=frameRate=0,e=Date.now();b.exports={countFrame:function(){var a=Date.now(),b=a-e;frameCountThisSecond+=1,e=a,d+=b,d>=1e3&&(d-=1e3,frameRate=frameCountThisSecond,frameCountThisSecond=0)},get frameRate(){return frameRate},draw:function(a){a.font="30px Verdana",a.fillStyle="rgba(250, 50, 50, 0.5)",a.fillText(frameRate,20,50)}}},{}],48:[function(a,b,c){var d=0;b.exports={get lastId(){return d},get nextId(){return d+=1}}},{}],49:[function(a,b,c){var d=a("lumberjackjs");b.exports=d()},{lumberjackjs:7}],50:[function(a,b,c){b.exports={mergeLeft:function(a,b){var c;for(c in b)a[c]=b[c]},mergeDefaults:function(a,b){var c;for(c in b)c in a||(a[c]=b[c])}}},{}],51:[function(a,b,c){(function(a){var c,d=50,e=[],f=0;for(c=0;d>c;c+=1)e.push(a.Math.random());b.exports=function(){return f+=1,f%=d,e[f]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(a,b,c){var d=a("./random.js");b.exports={shuffle:function(a){var b,c,e;for(b=0;b<a.length;b+=1)c=parseInt(d()*(b+1)),e=a[b],a[b]=a[c],a[c]=e;return a},range:function(a,b){var c,d,e=[];for(b||(b=a,a=0),d=b-a,c=0;d>c;c+=1)e.push(c+a);return e}}},{"./random.js":51}],53:[function(a,b,c){var d=a("dragonjs");b.exports=d.CollisionHandler({name:"lerp"})},{dragonjs:13}],54:[function(a,b,c){var d=a("dragonjs");
d.addScreens([a("./screens/lerp.js")]),d.run(!0)},{"./screens/lerp.js":55,dragonjs:13}],55:[function(a,b,c){var d=a("dragonjs"),e=a("../sprites/static.js");b.exports=d.Screen({collisionSets:[a("../collisions/lerp.js")],spriteSet:[e({pos:d.Point(d.canvas.width/2,d.canvas.height/2),moving:!1}),e({pos:d.Point(d.canvas.width/2+90,d.canvas.height/2+50)}),a("../sprites/drag.js"),a("../sprites/label.js")],one:{ready:function(){this.start()}}}).extend({draw:function(a,b){a.fillStyle="#fafafa",a.fillRect(0,0,d.canvas.width,d.canvas.height),this.base.draw(a,b)}})},{"../collisions/lerp.js":53,"../sprites/drag.js":56,"../sprites/label.js":57,"../sprites/static.js":58,dragonjs:13}],56:[function(a,b,c){var d=a("dragonjs"),e=a("./label.js");b.exports=d.ClearSprite({depth:10,collisionSets:[d.collisions,a("../collisions/lerp.js")],mask:d.Rectangle(),size:d.Dimension(32,32),pos:d.Point(20,20),on:{"colliding.solid":function(a){this.flushWith(a)}}}).extend({update:function(){var a;this.dragging?(a=d.Mouse.offset,this.move(d.Point(a.x-this.size.width/2,a.y-this.size.height/2))):(this.speed.x=0,this.speed.y=0,d.Key.arrow.up&&(this.speed.y-=2),d.Key.arrow.right&&(this.speed.x+=2),d.Key.arrow.down&&(this.speed.y+=2),d.Key.arrow.left&&(this.speed.x-=2)),this.base.update()},move:function(a){e.stop(),this.base.move(a)},draw:function(a){a.fillStyle="#b6ff00",a.fillRect(this.pos.x,this.pos.y,this.size.width,this.size.height)}})},{"../collisions/lerp.js":53,"./label.js":57,dragonjs:13}],57:[function(a,b,c){var d=a("dragonjs");b.exports=d.ui.Label({text:"< drag me!",pos:d.Point(60,20),style:function(a){a.font="24px Comic Sans MS",a.textBaseline="top",a.textAlign="left",a.fillStyle="#666"}})},{dragonjs:13}],58:[function(a,b,c){(function(c){var d=a("dragonjs");b.exports=function(b){var e=0;return b.pos.subtract(d.Point(-32,-32),!0),d.ClearSprite({kind:"solid",collisionSets:a("../collisions/lerp.js"),mask:d.Rectangle(),size:d.Dimension(64,64),pos:b.pos}).extend({draw:function(a){a.fillStyle="#444",a.fillRect(this.pos.x,this.pos.y,this.size.width,this.size.height)},update:function(){b.moving&&(e+=.1,e%=3.1415,this.speed.x=2*c.Math.sin(e),this.speed.y=2*c.Math.cos(e)),this.base.update()}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collisions/lerp.js":53,dragonjs:13}]},{},[54]);